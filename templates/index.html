<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê²½ê¸°ë¶ê³¼í•™ê³  ë¶„ì‹¤ë¬¼ ì €ì¥ì†Œ</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      min-height: 100vh;
      background: linear-gradient(to bottom right, #fff7ed, #fef3c7, #fef9c3);
    }

    /* Header */
    header {
      position: sticky;
      top: 0;
      z-index: 40;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid #fed7aa;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .header-container {
      max-width: 1152px;
      margin: 0 auto;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .header-content {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .search-box {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      justify-content: flex-end;
      position: relative;
    }

    .search-box input {
      max-width: 320px;
    }

    /* Filter button/dropdown */
    .filter-container {
      position: relative;
      display: flex;
      align-items: center;
    }

    .filter-btn {
      padding: 0.65rem 1rem;
      background: white;
      border: 1px solid #fed7aa;
      border-radius: 1rem;
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.08);
      display: flex;
      align-items: center;
      gap: 0.4rem;
      color: #374151;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .filter-btn:hover {
      box-shadow: 0 10px 14px rgba(0, 0, 0, 0.12);
      transform: translateY(-1px);
    }

    .filter-btn:active {
      transform: translateY(0);
    }

    .filter-dropdown {
      position: absolute;
      right: 0;
      top: calc(100% + 0.5rem);
      background: white;
      border: 1px solid #fed7aa;
      border-radius: 1rem;
      box-shadow: 0 20px 25px rgba(0, 0, 0, 0.15);
      padding: 1.25rem;
      width: min(360px, 100vw - 2rem);
      animation: slideDown 0.3s ease-out;
      z-index: 30;
    }

    .filter-group {
      margin-bottom: 1rem;
    }

    .filter-group:last-child {
      margin-bottom: 0;
    }

    .filter-label {
      display: block;
      font-size: 0.875rem;
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.5rem;
    }

    .filter-select {
      width: 100%;
      padding: 0.5rem 1rem;
      border: 1px solid #e5e7eb;
      border-radius: 0.75rem;
      outline: none;
      transition: all 0.2s;
    }

    .filter-select:focus {
      border-color: #fb923c;
      box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.1);
    }

    /* Mobile adjustments */
    @media (max-width: 640px) {
      .header-container {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.75rem;
      }
      .search-box {
        width: 100%;
        justify-content: flex-start;
        flex-wrap: wrap;
      }
      .search-box input {
        width: 100%;
      }
      .filter-container {
        margin-left: 0;
      }
      h1 {
        font-size: 1.35rem;
      }
      .logo {
        width: 32px;
        height: 32px;
      }
    }

    .logo {
      width: 40px;
      height: 40px;
      background: linear-gradient(to bottom right, #fb923c, #f59e0b);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    h1 {
      font-size: 1.875rem;
      font-weight: bold;
      background: linear-gradient(to right, #ea580c, #d97706);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* Main */
    main {
      max-width: 1152px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    .posts-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    @media (min-width: 768px) {
      .posts-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      h1 {
        font-size: 1.875rem;
      }
    }

    @media (min-width: 1024px) {
      .posts-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* Post Card */
    .post-card {
      background: white;
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      opacity: 0;
      animation: fadeInUp 0.5s ease-out forwards;
    }

    .post-card:hover {
      box-shadow: 0 20px 25px rgba(0, 0, 0, 0.15);
      transform: translateY(-4px);
    }

    .post-image-container {
      position: relative;
      height: 192px;
      overflow: hidden;
    }

    .post-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .no-image {
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #fef3c7, #fde68a);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #b45309;
      font-weight: 700;
      letter-spacing: 0.02em;
    }

    .post-card:hover .post-image {
      transform: scale(1.1);
    }

    .post-badge {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      padding: 0.25rem 0.75rem;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(4px);
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      color: #ea580c;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .post-content {
      padding: 1.25rem;
    }

    .post-title {
      font-size: 1.125rem;
      font-weight: bold;
      color: #1f2937;
      margin-bottom: 0.5rem;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .post-text {
      font-size: 0.875rem;
      color: #4b5563;
      margin-bottom: 0.75rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .post-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.75rem;
      color: #6b7280;
    }

    .post-color {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .color-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: linear-gradient(to bottom right, #fb923c, #f59e0b);
    }

    /* Filter tags */
    .tag-bar {
      display: flex;
      gap: 0.35rem;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .tag-btn {
      padding: 0.4rem 0.7rem;
      border-radius: 999px;
      border: 1px solid #fed7aa;
      background: white;
      color: #b45309;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.15s ease;
      font-size: 0.85rem;
    }

    .tag-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 12px rgba(0, 0, 0, 0.08);
    }

    .tag-btn.active {
      background: linear-gradient(135deg, #f97316, #f59e0b);
      color: white;
      border-color: #f59e0b;
      box-shadow: 0 10px 15px rgba(249, 115, 22, 0.2);
    }

    /* FAB Button */
    .fab {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 64px;
      height: 64px;
      background: linear-gradient(to bottom right, #f97316, #f59e0b);
      border: none;
      border-radius: 50%;
      box-shadow: 0 20px 25px rgba(251, 146, 60, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 30;
      transition: all 0.3s ease;
    }

    .fab:hover {
      box-shadow: 0 20px 25px rgba(251, 146, 60, 0.5);
      transform: scale(1.1);
    }

    .fab:active {
      transform: scale(0.95);
    }

    .fab svg {
      display: block;
      transition: transform 0.3s ease;
    }

    .fab:hover svg {
      transform: rotate(90deg);
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
      z-index: 50;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      animation: fadeIn 0.2s ease-out;
    }

    .modal {
      background: white;
      border-radius: 1.5rem;
      max-width: 512px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
      animation: scaleIn 0.3s ease-out;
    }

    .modal-header {
      position: sticky;
      top: 0;
      background: white;
      border-bottom: 1px solid #f3f4f6;
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-radius: 1.5rem 1.5rem 0 0;
    }

    .modal-title {
      font-size: 1.25rem;
      font-weight: bold;
      color: #1f2937;
    }

    .close-btn {
      width: 32px;
      height: 32px;
      border: none;
      background: transparent;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.2s;
    }

    .close-btn:hover {
      background: #f3f4f6;
    }

    .modal-body {
      padding: 1.5rem;
    }

    .form-group {
      margin-bottom: 1.25rem;
    }

    .form-label {
      display: block;
      font-size: 0.875rem;
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.5rem;
    }

    .form-input,
    .form-textarea {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid #e5e7eb;
      border-radius: 0.75rem;
      outline: none;
      transition: all 0.2s;
      font-family: inherit;
    }

    .form-input:focus,
    .form-textarea:focus {
      border-color: #fb923c;
      box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.1);
    }

    .form-textarea {
      resize: none;
    }

    .upload-area {
      border: 2px dashed #e5e7eb;
      border-radius: 0.75rem;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: border-color 0.2s;
    }

    .upload-area:hover {
      border-color: #fb923c;
    }

    .upload-area.dragover {
      border-color: #f97316;
      background: #fff7ed;
    }

    .upload-icon {
      margin: 0 auto 0.75rem;
      color: #9ca3af;
    }

    .upload-text {
      font-size: 0.875rem;
      color: #6b7280;
    }

    .upload-subtext {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 0.25rem;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .submit-btn {
      width: 100%;
      padding: 1rem;
      background: linear-gradient(to right, #f97316, #f59e0b);
      color: white;
      font-weight: 600;
      border: none;
      border-radius: 0.75rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .submit-btn:hover {
      box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
      transform: scale(1.02);
    }

    .submit-btn:active {
      transform: scale(0.98);
    }

    .empty-state {
      text-align: center;
      padding: 5rem 1rem;
    }

    .empty-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }

    .empty-text {
      color: #6b7280;
      font-size: 1.125rem;
    }

    .hidden {
      display: none;
    }

    /* (ì¶”ê°€) ì‚­ì œ ë²„íŠ¼ + í™•ì¸ ëª¨ë‹¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .delete-btn {
      margin-left: 0.5rem;
      padding: 0.3rem 0.7rem;
      border: 1px solid #fed7aa;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      color: #b45309;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .delete-btn:hover {
      background: #fff7ed;
      transform: translateY(-1px);
      box-shadow: 0 8px 12px rgba(0,0,0,0.08);
    }
    .delete-btn:active { transform: translateY(0); }

    .confirm-modal {
      background: white;
      border-radius: 1.25rem;
      max-width: 420px;
      width: 100%;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
      animation: scaleIn 0.25s ease-out;
      overflow: hidden;
    }
    .confirm-header {
      padding: 1rem 1.25rem;
      border-bottom: 1px solid #f3f4f6;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .confirm-title {
      font-size: 1.125rem;
      font-weight: 800;
      color: #1f2937;
    }
    .confirm-body {
      padding: 1rem 1.25rem;
      color: #374151;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .confirm-actions {
      padding: 1rem 1.25rem;
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      border-top: 1px solid #f3f4f6;
      background: rgba(255,255,255,0.7);
      backdrop-filter: blur(10px);
    }
    .btn {
      padding: 0.65rem 0.95rem;
      border-radius: 0.85rem;
      border: 1px solid #e5e7eb;
      background: white;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 15px rgba(0,0,0,0.08);
    }
    .btn:active { transform: translateY(0); }
    .btn-cancel {
      color: #374151;
    }
    .btn-delete {
      border: none;
      color: white;
      background: linear-gradient(to right, #ef4444, #f97316);
    }

    /* Detail modal */
    .detail-modal {
      background: white;
      border-radius: 1.25rem;
      max-width: 720px;
      width: 100%;
      overflow: hidden;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
      animation: scaleIn 0.25s ease-out;
    }
    .detail-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.25rem;
      border-bottom: 1px solid #f3f4f6;
    }
    .detail-body {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
      padding: 1.25rem;
    }
    @media (min-width: 768px) {
      .detail-body {
        grid-template-columns: 1.1fr 1fr;
      }
    }
    .detail-image {
      width: 100%;
      height: 100%;
      min-height: 240px;
      object-fit: cover;
      border-radius: 1rem;
      background: #f3f4f6;
    }
    .detail-placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #fef3c7, #fde68a);
      color: #b45309;
      font-weight: 700;
      border-radius: 1rem;
      min-height: 240px;
    }
    .detail-title {
      font-size: 1.25rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      color: #1f2937;
    }
    .detail-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      color: #6b7280;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
    .detail-chip {
      padding: 0.35rem 0.65rem;
      border-radius: 999px;
      background: #fff7ed;
      border: 1px solid #fde68a;
      color: #b45309;
      font-weight: 700;
      font-size: 0.85rem;
    }
    .detail-content {
      color: #374151;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    /* Animations */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-container">
      <div class="header-content">
        <div class="logo">
          <svg width="24" height="24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </div>
        <h1>ê²½ê¸°ë¶ê³¼í•™ê³  ë¶„ì‹¤ë¬¼ ì €ì¥ì†Œ</h1>
      </div>
      <div class="search-box">
        <input type="text" id="searchInput" class="form-input" placeholder="ê²€ìƒ‰ (ì œëª©, ë‚´ìš©, ìœ„ì¹˜ ë“±)">
        <div class="filter-container">
          <button class="filter-btn" id="filterBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="3 4 21 4 14 13 14 20 10 22 10 13 3 4"></polygon>
            </svg>
            í•„í„°
          </button>
          <div class="filter-dropdown hidden" id="filterDropdown">
            <div class="filter-group">
              <label class="filter-label">ë¬¼ê±´ ìœ í˜•</label>
              <select class="filter-select" id="categoryFilter">
                <option value="all">ì „ì²´</option>
                <option value="ì „ìê¸°ê¸°">ì „ìê¸°ê¸°</option>
                <option value="í•„ê¸°êµ¬">í•„ê¸°êµ¬</option>
                <option value="ì˜ë¥˜">ì˜ë¥˜</option>
                <option value="ì•¡ì„¸ì„œë¦¬">ì•¡ì„¸ì„œë¦¬</option>
                <option value="ê¸°íƒ€">ê¸°íƒ€</option>
              </select>
            </div>
            <div class="filter-group">
              <label class="filter-label">ìƒ‰ê¹”</label>
              <select class="filter-select" id="colorFilter">
                <option value="all">ì „ì²´</option>
                <option value="ê²€ì •">ê²€ì •</option>
                <option value="í°ìƒ‰">í°ìƒ‰</option>
                <option value="íšŒìƒ‰">íšŒìƒ‰</option>
                <option value="ë¹¨ê°•">ë¹¨ê°•</option>
                <option value="íŒŒë‘">íŒŒë‘</option>
                <option value="ì´ˆë¡">ì´ˆë¡</option>
                <option value="ë…¸ë‘">ë…¸ë‘</option>
                <option value="ê¸°íƒ€">ê¸°íƒ€</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main>
    <div class="posts-grid" id="postsGrid"></div>
    <div class="empty-state hidden" id="emptyState">
      <div class="empty-icon">ğŸ”</div>
      <p class="empty-text">í•´ë‹¹í•˜ëŠ” ë¶„ì‹¤ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤</p>
    </div>
  </main>

  <!-- FAB Button -->
  <button class="fab" id="fabBtn">
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round">
      <line x1="12" y1="4" x2="12" y2="20"></line>
      <line x1="4" y1="12" x2="20" y2="12"></line>
    </svg>
  </button>

  <!-- Modal -->
  <div class="modal-overlay hidden" id="modalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">ë¶„ì‹¤ë¬¼ ë“±ë¡</h2>
        <button class="close-btn" id="closeBtn">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">ì œëª©</label>
          <input type="text" class="form-input" id="titleInput" placeholder="ì˜ˆ: ê²€ì€ìƒ‰ ë¬´ì„  ì´ì–´í° ìŠµë“">
        </div>
        <div class="form-group">
          <label class="form-label">ì‚¬ì§„</label>
          <div class="upload-area">
            <svg class="upload-icon" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M23 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Z"></path>
              <path d="M23 19v13M5.5 9.5 9 13l-3.5 3.5M17 13H5"></path>
            </svg>
            <p class="upload-text">ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”</p>
            <p class="upload-subtext">í´ë¦­í•˜ì—¬ ì„ íƒ</p>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">ìƒì„¸ ì„¤ëª…</label>
          <textarea class="form-textarea" id="contentInput" rows="4" placeholder="ìŠµë“ ì¥ì†Œì™€ íŠ¹ì§•ì„ ìì„¸íˆ ì ì–´ì£¼ì„¸ìš”"></textarea>
        </div>

        <!-- (ë³µêµ¬) ë¬¼ê±´ ìœ í˜•(ì¹´í…Œê³ ë¦¬) ë‹¤ì‹œ ìœ ì§€ + (ì¶”ê°€) ìœ„ì¹˜ ì„ íƒ -->
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">ë¬¼ê±´ ìœ í˜•</label>
            <select class="filter-select" id="categoryInput">
              <option value="ì „ìê¸°ê¸°">ì „ìê¸°ê¸°</option>
              <option value="í•„ê¸°êµ¬">í•„ê¸°êµ¬</option>
              <option value="ì˜ë¥˜">ì˜ë¥˜</option>
              <option value="ì•¡ì„¸ì„œë¦¬">ì•¡ì„¸ì„œë¦¬</option>
              <option value="ê¸°íƒ€">ê¸°íƒ€</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">ìƒ‰ê¹”</label>
            <select class="filter-select" id="colorInput">
              <option value="ê²€ì •">ê²€ì •</option>
              <option value="í°ìƒ‰">í°ìƒ‰</option>
              <option value="íšŒìƒ‰">íšŒìƒ‰</option>
              <option value="ë¹¨ê°•">ë¹¨ê°•</option>
              <option value="íŒŒë‘">íŒŒë‘</option>
              <option value="ì´ˆë¡">ì´ˆë¡</option>
              <option value="ë…¸ë‘">ë…¸ë‘</option>
              <option value="ê¸°íƒ€">ê¸°íƒ€</option>
            </select>
          </div>
        </div>

        <!-- (ì¶”ê°€) ìœ„ì¹˜ ì„ íƒ(ê¸°ì¡´ ìš”ì†Œ ì œê±° ì—†ì´ ì•„ë˜ì— ì¶”ê°€) -->
        <div class="form-group">
          <label class="form-label">ìŠµë“ ìœ„ì¹˜</label>
          <select class="filter-select" id="locationInput">
            <option value="ê°•ì˜ë™ 2ì¸µ">ê°•ì˜ë™ 2ì¸µ</option>
            <option value="ê°•ì˜ë™ 3ì¸µ">ê°•ì˜ë™ 3ì¸µ</option>
            <option value="ê°•ì˜ë™ 4ì¸µ">ê°•ì˜ë™ 4ì¸µ</option>
            <option value="ê°•ì˜ë™ 5ì¸µ">ê°•ì˜ë™ 5ì¸µ</option>
            <option value="ì‹¤í—˜ë™ 2ì¸µ">ì‹¤í—˜ë™ 2ì¸µ</option>
            <option value="ì‹¤í—˜ë™ 3ì¸µ">ì‹¤í—˜ë™ 3ì¸µ</option>
            <option value="ì‹¤í—˜ë™ 4ì¸µ">ì‹¤í—˜ë™ 4ì¸µ</option>
            <option value="ì‹¤í—˜ë™ 5ì¸µ">ì‹¤í—˜ë™ 5ì¸µ</option>
            <option value="ë„ì„œê´€">ë„ì„œê´€</option>
            <option value="ì²´ìœ¡ê´€">ì²´ìœ¡ê´€</option>
            <option value="ìš´ë™ì¥">ì •ë¬¸</option>
            <option value="ê¸°ìˆ™ì‚¬">ê¸°ìˆ™ì‚¬</option>
            <option value="ê¸‰ì‹ì‹¤">ì‹ë‹¹</option>
            <option value="ê°•ë‹¹">ê°•ë‹¹</option>
            <option value="ë ˆì¸ë³´ìš°ë©”ì´ì»¤ì‹¤">ë ˆì¸ë³´ìš°ë©”ì´ì»¤ì‹¤</option>
            <option value="ììŠµì‹¤">ê°•ë‹¹</option>
            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
          </select>
        </div>

        <button class="submit-btn" id="submitBtn">ë“±ë¡í•˜ê¸°</button>
      </div>
    </div>
  </div>

  <!-- (ì¶”ê°€) ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
  <div class="modal-overlay hidden" id="confirmOverlay">
    <div class="confirm-modal" role="dialog" aria-modal="true">
      <div class="confirm-header">
        <div class="confirm-title">ì‚­ì œ í™•ì¸</div>
        <button class="close-btn" id="confirmCloseBtn" aria-label="ë‹«ê¸°">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="confirm-body">
        ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?<br>
        <span style="color:#6b7280;font-size:0.85rem;">ì‚­ì œí•˜ë©´ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</span>
      </div>
      <div class="confirm-actions">
        <button class="btn btn-cancel" id="confirmCancelBtn">ì·¨ì†Œ</button>
        <button class="btn btn-delete" id="confirmDeleteBtn">ì‚­ì œ</button>
      </div>
    </div>
  </div>

  <!-- ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ -->
  <div class="modal-overlay hidden" id="detailOverlay">
    <div class="detail-modal" role="dialog" aria-modal="true">
      <div class="detail-header">
        <div class="detail-title" id="detailTitle"></div>
        <button class="close-btn" id="detailCloseBtn" aria-label="ë‹«ê¸°">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="detail-body">
        <div id="detailImageWrapper"></div>
        <div>
          <div class="detail-meta">
            <span class="detail-chip" id="detailCategory"></span>
            <span class="detail-chip" id="detailColor"></span>
            <span class="detail-chip" id="detailLocation"></span>
            <span class="detail-chip" id="detailDate"></span>
          </div>
          <div class="detail-content" id="detailContent"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const USER_KEY = 'lost_user_id';

    function getUserId() {
      let id = localStorage.getItem(USER_KEY);
      if (!id) {
        id = crypto.randomUUID();
        localStorage.setItem(USER_KEY, id);
      }
      return id;
    }

    const currentUserId = getUserId();

    let posts = [];

    let selectedCategory = 'all';
    let selectedColor = 'all';
    let searchTerm = '';

    const colorGradients = {
      'ê²€ì •': 'linear-gradient(135deg, #111827, #374151)',
      'í°ìƒ‰': 'linear-gradient(135deg, #f9fafb, #e5e7eb)',
      'íšŒìƒ‰': 'linear-gradient(135deg, #6b7280, #9ca3af)',
      'ë¹¨ê°•': 'linear-gradient(135deg, #ef4444, #f97316)',
      'íŒŒë‘': 'linear-gradient(135deg, #2563eb, #38bdf8)',
      'ì´ˆë¡': 'linear-gradient(135deg, #16a34a, #22c55e)',
      'ë…¸ë‘': 'linear-gradient(135deg, #f59e0b, #facc15)',
      'ê¸°íƒ€': 'linear-gradient(135deg, #a855f7, #6366f1)'
    };

    // Elements
    const postsGrid = document.getElementById('postsGrid');
    const emptyState = document.getElementById('emptyState');
    const searchInput = document.getElementById('searchInput');
    const filterBtn = document.getElementById('filterBtn');
    const filterDropdown = document.getElementById('filterDropdown');
    const categoryFilter = document.getElementById('categoryFilter');
    const colorFilter = document.getElementById('colorFilter');
    const fabBtn = document.getElementById('fabBtn');
    const modalOverlay = document.getElementById('modalOverlay');
    const closeBtn = document.getElementById('closeBtn');
    const submitBtn = document.getElementById('submitBtn');
    const titleInput = document.getElementById('titleInput');
    const contentInput = document.getElementById('contentInput');
    const categoryInput = document.getElementById('categoryInput');
    const colorInput = document.getElementById('colorInput');
    const locationInput = document.getElementById('locationInput');

    // confirm modal elements
    const confirmOverlay = document.getElementById('confirmOverlay');
    const confirmCancelBtn = document.getElementById('confirmCancelBtn');
    const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
    const confirmCloseBtn = document.getElementById('confirmCloseBtn');

    let pendingDeleteId = null;

    // Render posts
    function matchesSearch(post, term) {
      if (!term) return true;
      const haystack = [
        post.title,
        post.content,
        post.location,
        post.category,
        post.color
      ].filter(Boolean).join(' ').toLowerCase();
      return term.split(/\s+/).filter(Boolean).every(t => haystack.includes(t));
    }

    function updateSearchTerm() {
      searchTerm = searchInput.value.trim().toLowerCase();
    }

    function renderPosts() {
      const filteredPosts = posts.filter(post => {
        const searchMatch = matchesSearch(post, searchTerm);
        return searchMatch;
      });

      if (filteredPosts.length === 0) {
        postsGrid.classList.add('hidden');
        emptyState.classList.remove('hidden');
        return;
      }

      postsGrid.classList.remove('hidden');
      emptyState.classList.add('hidden');

      postsGrid.innerHTML = filteredPosts.map((post, index) => {
        const isMine = post.authorId === currentUserId;
        const dotStyle = colorGradients[post.color] ? `style="background:${colorGradients[post.color]}"` : '';
        const imageContent = post.image
          ? `<img src="${post.image}" alt="${post.title}" class="post-image">`
          : `<div class="no-image">ì´ë¯¸ì§€ ì—†ìŒ</div>`;
        return `
          <div class="post-card" data-id="${post.id}" style="animation-delay: ${index * 0.1}s">
            <div class="post-image-container">
              ${imageContent}
              <span class="post-badge">${post.category}</span>
            </div>
            <div class="post-content">
              <h3 class="post-title">${post.title}</h3>
              <p class="post-text">${post.content}</p>
              <div class="post-meta">
                <span class="post-color">
                  <div class="color-dot" ${dotStyle}></div>
                  ${post.color}
                </span>
                <span>
                  ${post.location ? post.location + ' Â· ' : ''}${post.date}
                  ${isMine ? `<button class="delete-btn" data-id="${post.id}">ì‚­ì œ</button>` : ``}
                </span>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    // Event listeners
    searchInput.addEventListener('input', (e) => {
      updateSearchTerm();
      renderPosts();
    });

    // í•„í„° ë“œë¡­ë‹¤ìš´
    filterBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      filterDropdown.classList.toggle('hidden');
    });

    document.addEventListener('click', (e) => {
      if (!filterDropdown.contains(e.target) && !filterBtn.contains(e.target)) {
        filterDropdown.classList.add('hidden');
      }
    });

    categoryFilter.addEventListener('change', (e) => {
      selectedCategory = e.target.value;
      fetchPosts();
    });

    colorFilter.addEventListener('change', (e) => {
      selectedColor = e.target.value;
      fetchPosts();
    });

    fabBtn.addEventListener('click', () => {
      modalOverlay.classList.remove('hidden');
    });

    closeBtn.addEventListener('click', () => {
      modalOverlay.classList.add('hidden');
    });

    modalOverlay.addEventListener('click', (e) => {
      if (e.target === modalOverlay) {
        modalOverlay.classList.add('hidden');
      }
    });

    async function fetchPosts() {
      const params = new URLSearchParams();
      params.set('category', selectedCategory);
      params.set('color', selectedColor);
      const res = await fetch(`/api/posts?${params.toString()}`);
      if (!res.ok) {
        alert('ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤');
        return;
      }
      posts = await res.json();
      renderPosts();
    }

    async function submitPost() {
      const title = titleInput.value.trim();
      const content = contentInput.value.trim();
      const category = categoryInput.value;
      const color = colorInput.value;
      const location = locationInput.value;

      if (!title || !content) {
        alert('ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
        return;
      }

      const formData = new FormData();
      formData.append('title', title);
      formData.append('content', content);
      formData.append('category', category);
      formData.append('color', color);
      formData.append('location', location);
      formData.append('authorId', currentUserId);

      if (selectedFile) {
        formData.append('image', selectedFile);
      }

      const res = await fetch('/api/posts', {
        method: 'POST',
        body: formData
      });

      if (!res.ok) {
        const err = await res.json();
        alert(err.error || 'ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
        return;
      }

      const newPost = await res.json();
      posts.unshift(newPost);
      renderPosts();

      // Reset form
      titleInput.value = '';
      contentInput.value = '';
      categoryInput.value = 'ì „ìê¸°ê¸°';
      colorInput.value = 'ê²€ì •';
      locationInput.value = 'ê°•ì˜ë™ 2ì¸µ';
      selectedFile = null;
      uploadText.innerText = 'ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”';
      modalOverlay.classList.add('hidden');
    }

    submitBtn.addEventListener('click', submitPost);

    // ì¹´ë“œ í´ë¦­ / ì‚­ì œ ë¶„ê¸°
    postsGrid.addEventListener('click', (e) => {
      const btn = e.target.closest('.delete-btn');
      if (btn) {
        const id = btn.dataset.id;
        const target = posts.find(p => String(p.id) === String(id));
        if (!target) return;
        if (target.authorId !== currentUserId) return; // ë‚¨ì˜ ê¸€ ë°©ì§€
        pendingDeleteId = id;
        confirmOverlay.classList.remove('hidden');
        return;
      }

      const card = e.target.closest('.post-card');
      if (!card) return;
      const id = card.dataset.id;
      const target = posts.find(p => String(p.id) === String(id));
      if (target) showDetail(target);
    });

    function closeConfirm() {
      pendingDeleteId = null;
      confirmOverlay.classList.add('hidden');
    }

    confirmCancelBtn.addEventListener('click', closeConfirm);
    confirmCloseBtn.addEventListener('click', closeConfirm);

    confirmOverlay.addEventListener('click', (e) => {
      if (e.target === confirmOverlay) closeConfirm();
    });

    confirmDeleteBtn.addEventListener('click', async () => {
      if (pendingDeleteId == null) return;
      const id = pendingDeleteId;
      const res = await fetch(`/api/posts/${id}?authorId=${currentUserId}`, { method: 'DELETE' });
      if (!res.ok) {
        alert('ì‚­ì œ ì‹¤íŒ¨');
        return;
      }
      posts = posts.filter(p => String(p.id) !== String(id));
      closeConfirm();
      renderPosts();
    });

    // ìƒì„¸ ëª¨ë‹¬
    const detailOverlay = document.getElementById('detailOverlay');
    const detailCloseBtn = document.getElementById('detailCloseBtn');
    const detailTitle = document.getElementById('detailTitle');
    const detailCategory = document.getElementById('detailCategory');
    const detailColor = document.getElementById('detailColor');
    const detailLocation = document.getElementById('detailLocation');
    const detailDate = document.getElementById('detailDate');
    const detailContent = document.getElementById('detailContent');
    const detailImageWrapper = document.getElementById('detailImageWrapper');

    function showDetail(post) {
      detailTitle.textContent = post.title;
      detailCategory.textContent = post.category;
      detailColor.textContent = post.color;
      detailLocation.textContent = post.location || 'ìœ„ì¹˜ ë¯¸ìƒ';
      detailDate.textContent = post.date || '';
      detailContent.textContent = post.content;

      if (post.image) {
        detailImageWrapper.innerHTML = `<img src="${post.image}" alt="${post.title}" class="detail-image">`;
      } else {
        detailImageWrapper.innerHTML = `<div class="detail-placeholder">ì´ë¯¸ì§€ ì—†ìŒ</div>`;
      }

      detailOverlay.classList.remove('hidden');
    }

    function closeDetail() {
      detailOverlay.classList.add('hidden');
    }

    detailCloseBtn.addEventListener('click', closeDetail);
    detailOverlay.addEventListener('click', (e) => {
      if (e.target === detailOverlay) closeDetail();
    });

    // íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
    const uploadArea = document.querySelector('.upload-area');
    const uploadText = document.querySelector('.upload-text');
    let selectedFile = null;

    uploadArea.addEventListener('click', () => {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';
      input.onchange = () => {
        if (input.files && input.files[0]) {
          selectedFile = input.files[0];
          uploadText.innerText = selectedFile.name;
        }
      };
      input.click();
    });

    // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì—…ë¡œë“œ
    ['dragenter', 'dragover'].forEach(evt => {
      uploadArea.addEventListener(evt, (e) => {
        e.preventDefault();
        e.stopPropagation();
        uploadArea.classList.add('dragover');
      });
    });

    ['dragleave', 'drop'].forEach(evt => {
      uploadArea.addEventListener(evt, (e) => {
        e.preventDefault();
        e.stopPropagation();
        uploadArea.classList.remove('dragover');
      });
    });

    uploadArea.addEventListener('drop', (e) => {
      const files = e.dataTransfer?.files;
      if (files && files[0]) {
        selectedFile = files[0];
        uploadText.innerText = selectedFile.name;
      }
    });

    // Initial fetch
    fetchPosts();
  </script>
</body>
</html>
